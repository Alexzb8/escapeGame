<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ECS521 Project: Escape Game</title>
<style>
body{
	background-color:black;
	margin: 0;
}
#game{
	display:block;
	width :1200px;
	margin-left: auto;
	margin-right: auto;
}
#canvasOne{
	margin:0;
}
#canvasTwo{
	background-color:white;
	margin:0;
	position: relative;
	top:-350px;
}
</style>
</head>
<body>
<div id="game">
	<canvas id = "canvasTwo" width = "200" height = "350"></canvas
    ><canvas id = "canvasOne" width = "1000" height = "700"></canvas>
</div>
<script type="text/javascript" src="Animation.js"></script>
<script type="text/javascript">
    /**
     * Screen 0: start screen
     * 1: basic living room view
     * 2: up close puzzle view
     * 3: up close portrait painting view
     * 4: up close desk drawer view
     * 5: up close xylophone view
     * 6: hallway view
     * 7: up close closed bedroom door
     * 8: up close open bedroom door
     * 9: winning screen
     * 10: death by monster screen
     * 11: death by timer screen
     */
    var currentScreen = 0;
    var timer = 0;
	var totalResources = 1;
	var numResourcesLoaded = 0;
	var finishedLoading = false;
	var images = {};

	function loadImage(name) {
		images[name] = new Image();
		images[name].onload = function() {
			resourceLoaded();
		}
		images[name].src = "./images/" + name + ".png";
	}
	function resourceLoaded() {

		numResourcesLoaded += 1;
		if(numResourcesLoaded === totalResources) {
			finishedLoading = true;
		}
	}
    function init() {
        var canvas = document.getElementById("canvasOne");
        var context = canvas.getContext("2d");
		
		context.fillStyle="white";
		context.font = "100px Georgia";
		context.fillText("loading...", 40, 140);
		
		loadImage("SCREEN1");
    }

    function startGame() {
        // TODO: DRAW TOOLBAR AND TIMER AND BEGIN TIMER COUNTDOWN
		
		
    }

    function continueGame(canvas,context) {
        if (currentScreen == 0) {            
			if(finishedLoading){
				context.drawImage(images["SCREEN1"], 0, 0, canvas.width, canvas.height);
			}
        } else if (currentScreen == 1) {

        }
    }

    window.onload = function() {
		var anim = new Animation("canvasOne");
		var anim2 = new Animation("canvasTwo");
		var canvas = anim.getCanvas();
		var canvas2 = anim2.getCanvas();
		var context = anim.getContext();
		var context2 = anim2.getContext();
		init();
		
		anim.setStage(function() {
			
			this.clear();
			continueGame(canvas,context);
			
		});
		anim.start();

    }
</script>

</body>
</html>
